<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
	<title>d2l-sequence-navigator-activity with activity test</title>
	<script src="../../webcomponentsjs/webcomponents-loader.js"></script>
	<script src="../../web-component-tester/browser.js"></script>
	<script src="../node_modules/polymer-siren-test-helpers/dist/index.js"></script>
	<link rel="import" href="../../polymer/polymer.html">
	<link rel="import" href="../d2l-sequence-navigator.html">
</head>
<body>

<test-fixture id="ActivityLinked">
	<template>
		<d2l-sequence-navigator token="bamboozle">
			<span slot="lesson-header">
				<d2l-lesson-header id="sidebarHeader"
					token="[[token]]"
				></d2l-lesson-header>
			</span>
		</d2l-sequence-navigator>
	</template>
</test-fixture>
<script>
	/* global SirenFixture */
	describe('d2l-sequence-navigator-activity for an activity', () => {
		let element;

		beforeEach(async() => {
			element = await SirenFixture.load('data/m2-activity5.json', fixture('ActivityLinked'));
		});

		it('should create a d2l-lesson-header child', function() {
			let lessonHeader;
			const slots = element.shadowRoot.querySelectorAll('slot');
			for (var i = 0; i < slots.length; i++) {
				if (slots[i].getAttribute('name') === 'lesson-header') {
					const assignedNode = slots[i].assignedNodes() && slots[i].assignedNodes()[0];
	
					const queryResult = assignedNode && assignedNode.querySelector('d2l-lesson-header');
					if (queryResult) {
						lessonHeader = queryResult;
						break;
					}
				}
			}
			expect( lessonHeader ).to.exist;
		});

	});
</script>
</body>
</html>