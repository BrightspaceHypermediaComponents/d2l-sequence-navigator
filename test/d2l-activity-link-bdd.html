<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

	<title>d2l-activity-link test</title>

	<script src="../../webcomponentsjs/webcomponents-loader.js"></script>
	<script src="../../web-component-tester/browser.js"></script>
	<script src="../../../sinonjs/sinon.js"></script>
	<link rel="import" href="../../polymer/polymer.html">
	<link rel="import" href="../components/d2l-activity-link.html">
</head>
<body>

<test-fixture id="basic">
	<template>
		<d2l-activity-link href="data/unit2-activity1.json" token="bamboozle" current-activity="an-activity"></d2l-activity-link>
	</template>
</test-fixture>

<script>
	describe('d2l-activity-link', () => {
		let element, sandbox;
		beforeEach(() =>{
			element = fixture('basic');
			sandbox = sinon.sandbox.create();
		});

		describe('on navigation', () => {
			beforeEach(()=>{
				element.dispatchEvent = sandbox.stub();
			});

			it('should raise a navigation event if it is not the current activity', () => {
				element.currentActivity = 'http://google.ca';
				expect(element.dispatchEvent).to.have.been.called;
			});

			it('should not raise a navigation event if its the current activity', () => {
				//the addition and slicing is to make a string that is new, but is actually the same
				element.currentActivity = (' ' + element.currentActivity).slice(1);
				expect(element.dispatchEvent).to.not.be.called;
			});

		});
	});
</script>
</body>
</html>
