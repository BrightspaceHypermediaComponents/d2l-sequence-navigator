<link rel="import" href="../../d2l-colors/d2l-colors.html">

<dom-module id="d2l-progress-bar">
	<template>
		<style>
			:host {
				display: block;

				--progress-bar-background-color: var(--d2l-color-mica);
				--progress-bar-foreground-color: var(--d2l-color-olivine);
				--progress-bar-border-color: none;
			}
			#outerBar {
				border-radius: 8px; /* (height of inner div) / 2 + padding */
				margin-top: 15px;
				width: 270px;
				background-color: var(--progress-bar-background-color);
				border: 1px solid var(--progress-bar-border-color);
			}

			#innerBar {
				height: 12px;
				border-radius: 8px;
				background-color: var(--progress-bar-foreground-color);
			}

			#innerBar.zero {
				width: 1px;
			}
		</style>

		<div
			id="outerBar"
		>
			<div
				id="innerBar"
				role="progressbar"
				aria-valuemin="0%"
				aria-valuemax="100%"
			>
			</div>
		</div>

	</template>
	<script>
		/*
		@memberOf window.D2L.Polymer.Mixins;
		*/
		class D2LProgressBar extends Polymer.Element {
			static get is() {
				return 'd2l-progress-bar';
			}
			static get properties() {
				return {
					percentCompleted: {
						type: Number,
						value: 0,
						observer: '_updateProgressBar'
					}
				};
			}

			_updateProgressBar() {
				if ( this.percentCompleted === 0) {
					this.$.innerBar.style.width = this.percentCompleted + '%';
					this.$.innerBar.classList.add('zero');
				}  else {
					this.$.innerBar.style.width = this.percentCompleted + '%';
					this.$.innerBar.classList.remove('zero');
				}
				this.$.innerBar.setAttribute('aria-valuenow', Math.floor(this.percentCompleted) + '%');
			}

		}
		customElements.define(D2LProgressBar.is, D2LProgressBar);
	</script>
</dom-module>
