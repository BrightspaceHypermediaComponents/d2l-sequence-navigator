<link rel="import" href="../../d2l-colors/d2l-colors.html">

<dom-module id="d2l-progress-bar">
	<template>
		<style>
			:host {
				display: block;
			}
			#outerBar {
				border-radius: 8px; /* (height of inner div) / 2 + padding */
				margin-top: 15px;
				width: 270px;
			}

			#innerBar {
				height: 12px;
				border-radius: 8px;
			}

			#innerBar.zero {
				width: 1px;
			}
		</style>

		<div
			id="outerBar"
		>
			<div
				id="innerBar"
				role="progressbar"
				aria-valuemin="0%"
				aria-valuemax="100%"
			>
			</div>
		</div>

	</template>
	<script>
		/*
		@memberOf window.D2L.Polymer.Mixins;
		*/
		class D2LProgressBar extends Polymer.Element {
			static get is() {
				return 'd2l-progress-bar';
			}
			static get properties() {
				return {
					percentCompleted: {
						type: Number,
						value: 0,
						observer: '_updateProgressBar'
					},
					backgroundColor: {
						type: String,
						observer: '_updateProgressBar'
					},
					foregroundColor: {
						type: String,
						observer: '_updateProgressBar'
					},
					borderColor: {
						type: String,
						observer: '_updateProgressBar'
					}
				};
			}

			_updateProgressBar() {
				if ( this.percentCompleted === 0) {
					this.$.innerBar.style.width = this.percentCompleted + '%';
					this.$.innerBar.classList.add('zero');
				}  else {
					this.$.innerBar.style.width = this.percentCompleted + '%';
					this.$.innerBar.classList.remove('zero');
				}
				this.$.innerBar.setAttribute('aria-valuenow', Math.floor(this.percentCompleted) + '%');

				this.$.outerBar.style.backgroundColor = this.backgroundColor;
				this.$.outerBar.style.border = '1px solid ' + this.borderColor;
				this.$.innerBar.style.backgroundColor = this.foregroundColor;
			}

		}
		customElements.define(D2LProgressBar.is, D2LProgressBar);
	</script>
</dom-module>
